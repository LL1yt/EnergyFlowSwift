Детальный план действий:

1. Критические исправления (высокий приоритет)

moe_processor.py:

- Убрать fallback для connection_ratios (строки 74-87)
- Убрать fallback для параметров экспертов (строки 101-113)
- Убрать fallback для CNF (строки 123-134)
- Заменить на строгие проверки с RuntimeError

connection_classifier.py:

- Убрать все cache fallback'и
- Убрать getattr с дефолтными значениями
- При отсутствии кэша - выбрасывать ошибку

2. Создание валидатора конфигурации

Создать ConfigValidator класс который будет:

- Проверять обязательные поля конфигурации при инициализации
- Выбрасывать RuntimeError при отсутствии обязательных полей
- Валидировать вложенные атрибуты

3. Средний приоритет

device_manager.py:

- Убрать автоматический fallback с GPU на CPU
- При недостатке памяти GPU - выбрасывать ошибку
- Пользователь должен явно указать устройство

model_cache.py:

- Убрать fallback при cache miss
- Выбрасывать ошибку если модель не в кэше

4. Низкий приоритет

- Пройтись по всем файлам и заменить паттерны value or default на явные проверки
- Убрать try/except блоки с fallback поведением
- Убрать import fallback'и в init.py файлах

Принцип замены:

# Было:

value = config.param or default_value

# Стало:

if not hasattr(config, 'param') or config.param is None:
raise RuntimeError(
f"❌ КРИТИЧЕСКАЯ ОШИБКА: Отсутствует обязательный параметр config.param. "
f"Проверьте конфигурацию в project_config.py"
)
value = config.param

Это соответствует принципу из CLAUDE.md: "лучше пусть будет ошибка, которая приведет к полному падению программы, чем костыли непонятные".
