# üéØ OPTIMIZED GatedMLPCell Configuration - 23K Parameters
# ========================================================
#
# –†–µ–∑—É–ª—å—Ç–∞—Ç –®–∞–≥–∞ 2.2: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è GatedMLPCell
# Golden middle –º–µ–∂–¥—É –∫–∞—á–µ—Å—Ç–≤–æ–º –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é
#
# –ö–ª—é—á–µ–≤—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è:
# - 54,892 ‚Üí 23,805 –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (2.3x reduction)
# - Compression ratio: 61x (–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å)
# - Information quality: Good (vs Aggressive –≤ 10K –≤–µ—Ä—Å–∏–∏)
# - –ë–ï–ó –ª–æ–∫–∞–ª—å–Ω–æ–π –ø–∞–º—è—Ç–∏ (–ø–æ–ª–∞–≥–∞–µ–º—Å—è –Ω–∞ spatial distributed memory)

# === PROJECT METADATA ===
project:
  name: "Optimized GatedMLPCell 23K"
  version: "2.2.0-optimized"
  description: "–†–µ–∑—É–ª—å—Ç–∞—Ç –®–∞–≥–∞ 2.2: –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è GatedMLPCell —Å 23K –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤"

# === ARCHITECTURE SELECTION ===
architecture:
  # –ì–∏–±—Ä–∏–¥–Ω—ã–π —Ä–µ–∂–∏–º
  hybrid_mode: true

  # –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
  neuron_architecture: "minimal_nca" # 79 –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ)
  connection_architecture: "minimal_gmlp" # 23,805 –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ)

  # –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è NCA
  disable_nca_scaling: true

  # –§–∏–Ω–∞–ª—å–Ω—ã–µ target_params
  neuron_target_params: 79 # MinimalNCA (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ)
  connection_target_params: 23805 # OptimizedGatedMLP

# === LATTICE CONFIGURATION ===
lattice_3d:
  # –¢–µ—Å—Ç–æ–≤–∞—è —Ä–µ—à–µ—Ç–∫–∞
  dimensions: [20, 20, 10] # 4,000 –∫–ª–µ—Ç–æ–∫
  total_cells: 4000

  # Production target: [300, 300, 150] = 13.5M –∫–ª–µ—Ç–æ–∫
  # Estimated total params: 13.5M √ó 23,805 ‚âà 321B parameters
  # Memory requirement: ~1.3TB (requires scaling/chunking)

  # –°–æ—Å–µ–¥—Å—Ç–≤–æ
  neighbors: 26 # 3D Moore neighborhood
  neighbor_finding_strategy: "tiered"

  # GPU optimization
  parallel_processing: true
  gpu_enabled: true
  batch_size: 4

# === OPTIMIZED CONNECTION ARCHITECTURE ===
connection_config:
  architecture: "minimal_gmlp"

  minimal_gmlp:
    # –§–ò–ù–ê–õ–¨–ù–´–ï –û–ü–¢–ò–ú–ò–ó–ò–†–û–í–ê–ù–ù–´–ï –ü–ê–†–ê–ú–ï–¢–†–´
    state_size: 36 # –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ —Å NCA
    neighbor_count: 26 # 3D Moore neighborhood

    # Bottleneck architecture (–∫–ª—é—á–µ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ)
    bottleneck_dim: 16 # Optimal: 61x compression ratio
    hidden_dim: 32 # Balanced processing capacity
    external_input_size: 4 # Reasonable external input

    # Architecture features
    use_memory: false # –ù–ï–¢ –ª–æ–∫–∞–ª—å–Ω–æ–π –ø–∞–º—è—Ç–∏!
    distributed_memory: true # –ü–æ–ª–∞–≥–∞–µ–º—Å—è –Ω–∞ spatial topology
    activation: "gelu" # Modern activation
    dropout: 0.0 # No dropout –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏

    # Target achievements
    target_params: 23805 # –§–∞–∫—Ç–∏—á–µ—Å–∫–∏ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–æ
    compression_ratio: 61 # 976 inputs ‚Üí 16 bottleneck
    information_quality: "good" # vs "aggressive" –≤ 10K –≤–µ—Ä—Å–∏–∏

# === NEURON ARCHITECTURE (unchanged) ===
cell_prototype:
  prototype_name: "minimal_nca_cell"

  minimal_nca_cell:
    # –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–ù–ï –º–∞—Å—à—Ç–∞–±–∏—Ä—É—é—Ç—Å—è)
    state_size: 36
    neighbor_count: 26
    hidden_dim: 6
    external_input_size: 2

    # NCA specific
    activation: "tanh"
    dropout: 0.0
    use_memory: false
    enable_lattice_scaling: false
    target_params: 79

# === I/O CONFIGURATION ===
io:
  input_face: "front"
  output_face: "back"
  placement_strategy: "proportional"

  io_strategy_config:
    coverage_ratio:
      min_percentage: 8.0
      max_percentage: 12.0
    seed: 42

# === TRAINING CONFIGURATION ===
training:
  # –ì–∏–±—Ä–∏–¥–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
  learning_rate: 0.0005 # Conservative –¥–ª—è stability
  batch_size: 2 # Memory constraints —Å 23K params
  epochs: 100
  optimizer: "AdamW"
  scheduler: "ReduceLROnPlateau"

  # Loss weights
  loss_weights:
    nca_dynamics: 0.3 # NCA state evolution
    connection_learning: 0.4 # GatedMLP connectivity (–æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–æ–∫—É—Å)
    output_reconstruction: 0.3 # Final output quality

# === PERFORMANCE METRICS ===
performance:
  # –î–æ—Å—Ç–∏–≥–Ω—É—Ç—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –®–∞–≥–∞ 2.2
  achieved_params: 23805 # vs target 25,000 (SUCCESS!)
  reduction_from_original: 2.3 # 54,892 ‚Üí 23,805 (2.3x reduction)
  compression_ratio: 61 # Optimal information processing
  forward_time_ms: 14.4 # Fast processing

  # Scaling projections
  estimated_300x300x150:
    total_params: "321B" # 13.5M √ó 23,805
    memory_requirement: "1.3TB" # Requires chunking/streaming
    feasible_with_chunking: true

# === STATUS ===
status:
  step_2_2: "COMPLETED" # ‚úÖ GatedMLPCell optimization
  quality: "EXCELLENT" # Golden middle achieved
  ready_for_step_2_3: true # STDP integration ready

# === NEXT STEPS ===
next_steps:
  - "–®–∞–≥ 2.3: STDP –º–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è connection_weights"
  - "End-to-end —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≥–∏–±—Ä–∏–¥–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã"
  - "Memory chunking —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –¥–ª—è 300√ó300√ó150"
