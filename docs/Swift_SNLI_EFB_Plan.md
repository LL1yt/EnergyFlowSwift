# Swift SNLI ‚Üí EFB2: –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω (–±–∏–Ω–∞—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Å —Ç–µ–∫—Å—Ç–æ–º + —ç–º–±–µ–¥–¥–∏–Ω–≥)

–¶–µ–ª—å: —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤ Swift –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–∞—Ç–∞—Å–µ—Ç–∞ –≤ –±–∏–Ω–∞—Ä–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ EFB2 –∏–∑ SNLI, —á—Ç–æ–±—ã –∫–∞–∂–¥–∞—è –∑–∞–ø–∏—Å—å —Å–æ–¥–µ—Ä–∂–∞–ª–∞ –∏—Å—Ö–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç –∏ —ç–º–±–µ–¥–¥–∏–Ω–≥ —É—á–∏—Ç–µ–ª—è (DistilBERT), –±–µ–∑ —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤ —É—á–∏—Ç–µ–ª—è. –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –ø—Ä–∏ –æ–±—É—á–µ–Ω–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω–∏–∑–∞—Ç–æ—Ä/–º–æ–¥–µ–ª—å –∏ —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å –≤—ã—Ö–æ–¥ —Å–æ z_teacher.

–ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –ø–ª–∞–Ω–∞
- –§–æ—Ä–º–∞—Ç –º–µ–Ω—è–µ—Ç—Å—è —Å EFB1 (tokens+masks+target) –Ω–∞ EFB2 (text[utf8]+target, —Ç–æ–∫–µ–Ω—ã –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã –∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ—Ç–∫–ª—é—á–µ–Ω—ã).
- –û–±–Ω–æ–≤–∏—Ç—å —Ä–∏–¥–µ—Ä –Ω–∞ Swift (SimpleJSONLDataset.swift): –ø–æ–¥–¥–µ—Ä–∂–∞—Ç—å —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ EFB2, —á—Ç–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–æ–∫–µ–Ω–æ–≤.
- –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –Ω–∞ Swift –ø–∏—à–µ—Ç EFB2 —Å —Ñ–ª–∞–≥–∞–º–∏ hasText=1, hasTokens=0 (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é). –¢–æ–∫–µ–Ω—ã —É—á–∏—Ç–µ–ª—è –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è.
- –¢–æ–∫–µ–Ω–∏–∑–∞—Ç–æ—Ä WordPiece —É—á–∏—Ç–µ–ª—è –æ—Å—Ç–∞—ë—Ç—Å—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º —à–∞–≥–æ–º –¥–ª—è –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞ DistilBERT (–Ω–µ —á–∞—Å—Ç—å —Ñ–æ—Ä–º–∞—Ç–∞ –¥–∞–Ω–Ω—ã—Ö).

EFB2: —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∞
- Endianness: little-endian.
- –ó–∞–≥–æ–ª–æ–≤–æ–∫:
  - magic: 4 –±–∞–π—Ç–∞ = "EFB2" (ASCII)
  - num_samples: u32
  - embedding_dim: u32
  - dataset_flags: u32 (–±–∏—Ç–æ–≤–∞—è –º–∞—Å–∫–∞ –Ω–∞ –Ω–∞–±–æ—Ä, –Ω–µ –Ω–∞ –ø—Ä–∏–º–µ—Ä)
    - bit0 (1<<0): hasTokens (0 ‚Äî —Ç–æ–∫–µ–Ω—ã –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç; 1 ‚Äî –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç)
    - bit1 (1<<1): hasText (0 ‚Äî —Ç–µ–∫—Å—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç; 1 ‚Äî –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç)
    - bit2 (1<<2): normalized (0 ‚Äî –±–µ–∑ L2; 1 ‚Äî —Å L2-–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–µ–π)
    - –ø—Ä–æ—á–∏–µ –±–∏—Ç—ã –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω—ã (0)
- –¢–µ–ª–æ: –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å—ç–º–ø–ª–∞
  - –ï—Å–ª–∏ hasText=1: text_len_bytes: u32; –∑–∞—Ç–µ–º text_bytes[text_len_bytes] (UTF‚Äë8, –±–µ–∑ –Ω—É–ª—å-—Ç–µ—Ä–º–∏–Ω–∞—Ç–æ—Ä–∞)
  - –ï—Å–ª–∏ hasTokens=1: L: u32; –∑–∞—Ç–µ–º input_ids[L√óu32]; attention_mask[L√óu8]
  - target: embedding_dim √ó f32

–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –∏ –º–∏–≥—Ä–∞—Ü–∏—è
- –ß—Ç–µ–Ω–∏–µ EFB1 –æ—Å—Ç–∞—ë—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π (–º–∞–≥–∏—è "EFB1"), –ø–æ–≤–µ–¥–µ–Ω–∏–µ –∫–∞–∫ —Ä–∞–Ω—å—à–µ (hasTokens=true, —Ç–µ–∫—Å—Ç–∞ –Ω–µ—Ç).
- EFB2 —Ä–∞—Å–ø–æ–∑–Ω–∞—ë—Ç—Å—è –ø–æ –º–∞–≥–∏–∏ "EFB2" –∏ –∑–∞–≥–æ–ª–æ–≤–∫—É —Å —Ñ–ª–∞–≥–∞–º–∏. –î–ª—è –Ω–∞—à–µ–≥–æ –∫–µ–π—Å–∞: hasText=1, hasTokens=0.
- –°—Ç–∞—Ä—ã–µ –ø–∞–π–ø–ª–∞–π–Ω—ã, –∑–∞–≤–∏—Å—è—â–∏–µ –æ—Ç —Ç–æ–∫–µ–Ω–æ–≤, –º–æ–≥—É—Ç –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å EFB1. –ù–æ–≤—ã–π –ø–∞–π–ø–ª–∞–π–Ω –æ–±—É—á–µ–Ω–∏—è, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–π –Ω–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–º —Ç–æ–∫–µ–Ω–∏–∑–∞—Ç–æ—Ä–µ, ‚Äî EFB2.

–û–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ EnergyFlowSwift/Sources/EnergyFlow/Dataset/SimpleJSONLDataset.swift
- –†–∞—Å—à–∏—Ä–∏—Ç—å –∑–∞–≥—Ä—É–∑—á–∏–∫ EFB:
  - –î–µ—Ç–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –º–∞–≥–∏—é: EFB1 –∏–ª–∏ EFB2.
  - –î–ª—è EFB2 –ø–∞—Ä—Å–∏—Ç—å: num_samples, embedding_dim, dataset_flags; –≤—ã—á–∏—Å–ª–∏—Ç—å hasTokens = flags & 1 != 0, hasText = flags & 2 != 0.
  - –°—á–∏—Ç—ã–≤–∞—Ç—å –ø–æ–ª—è per-sample –≤ –ø–æ—Ä—è–¥–∫–µ —Å–æ–≥–ª–∞—Å–Ω–æ —Ñ–ª–∞–≥–∞–º. –î–ª—è hasText=1 ‚Äî –ø—Ä–æ—á–∏—Ç–∞—Ç—å UTF‚Äë8 —Ç–µ–∫—Å—Ç; –¥–ª—è hasTokens=1 ‚Äî –ø—Ä–æ—á–∏—Ç–∞—Ç—å L/ids/mask; –≤—Å–µ–≥–¥–∞ ‚Äî target.
- –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö:
  - JSONLSample —É–∂–µ –ø–æ–¥—Ö–æ–¥–∏—Ç: text: String?, inputIDs: [Int]?, attentionMask: [Int]?, target: [Float].
  - –ü—Ä–∏ EFB2(hasText=1, hasTokens=0) –∑–∞–ø–æ–ª–Ω—è—Ç—å text –∏ target, –æ—Å—Ç–∞–≤–ª—è—Ç—å inputIDs/attentionMask = nil.
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è:
  - –°–µ–π—á–∞—Å hasTokens —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤ true –¥–ª—è –ª—é–±–æ–≥–æ EFB. –ò–∑–º–µ–Ω–∏—Ç—å –Ω–∞ –ø–µ—Ä–µ–¥–∞—á—É —Ä–µ–∞–ª—å–Ω–æ–≥–æ –ø—Ä–∏–∑–Ω–∞–∫–∞ –∏–∑ –ø–∞—Ä—Å–µ—Ä–∞ EFB (EFB1 ‚áí true; EFB2 ‚áí –ø–æ —Ñ–ª–∞–≥—É).
  - –ò–∑–º–µ–Ω–∏—Ç—å tryLoadEFB, —á—Ç–æ–±—ã –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å (samples, embeddingDim, hasTokens) –∏–ª–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.
- –ë–∞—Ç—á–∏–Ω–≥:
  - –¢–µ–∫—É—â–∞—è –ª–æ–≥–∏–∫–∞ —É–∂–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–∞–¥–∞–µ—Ç –≤ .text, –µ—Å–ª–∏ hasTokens=false. –ù–∏—á–µ–≥–æ –º–µ–Ω—è—Ç—å –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è, –Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ç–≤–ª–µ–Ω–∏–µ –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç self.hasTokens –∏ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–≥–æ –Ω–∞–ª–∏—á–∏—è ids/mask –≤ —Å—ç–º–ø–ª–∞—Ö.
- –í–∞–ª–∏–¥–∞—Ü–∏–∏ –∏ –æ—à–∏–±–∫–∏:
  - –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –¥–ª—è –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö text_len –∏ –≤—ã—Ö–æ–¥–∞ –∑–∞ –∫–æ–Ω–µ—Ü —Ñ–∞–π–ª–∞; –≤—ã–±—Ä–∞—Å—ã–≤–∞—Ç—å truncatedFile –ø—Ä–∏ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏.
  - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ embeddingDim —Å–æ–≤–ø–∞–¥–∞–µ—Ç –ø–æ –≤—Å–µ–º —Å—ç–º–ø–ª–∞–º.

–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä SNLI ‚Üí EFB2 (Swift CLI)
- –¶–µ–ª—å: —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π CLI (–Ω–∞–ø—Ä–∏–º–µ—Ä, EFSnliToEFB2) –≤ —Å–æ—Å—Ç–∞–≤–µ SPM, –∫–æ—Ç–æ—Ä—ã–π:
  - –ó–∞–≥—Ä—É–∂–∞–µ—Ç/–∫—ç—à–∏—Ä—É–µ—Ç SNLI ¬´–±–∞–∑–æ–≤—ã–π –ø–æ–¥–Ω–∞–±–æ—Ä¬ª (–∫–∞–∫ –≤ Python-–ª–æ–≥–∏–∫–µ: cache/snli/snli_frac{‚Ä¶}_min{‚Ä¶}.jsonl), –ø—Ä–∏–º–µ–Ω—è–µ—Ç --snli-limit –∫–∞–∫ –≤–µ—Ä—Ö–Ω—é—é –æ–±—Ä–µ–∑–∫—É.
  - –°—á–∏—Ç–∞–µ—Ç —ç–º–±–µ–¥–¥–∏–Ω–≥–∏ —É—á–∏—Ç–µ–ª—è —Å –ø–æ–º–æ—â—å—é Core ML DistilBERT (—Å–º. –Ω–∏–∂–µ), –±–µ–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤.
  - –ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç EFB2 —Å —Ñ–ª–∞–≥–∞–º–∏: hasText=1, hasTokens=0, normalized=(–ø–æ —Ñ–ª–∞–≥—É CLI).

–§–∞–∑—ã –∏ —à–∞–≥–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
- –§–∞–∑–∞ 0 ‚Äî CLI –∏ –∫–æ–Ω—Ñ–∏–≥
  - –ù–æ–≤—ã–π —Ç–∞—Ä–≥–µ—Ç SPM: Sources/EFSnliToEFB2/main.swift.
  - CLI —Ñ–ª–∞–≥–∏: --efb-output, --snli-fraction, --snli-limit, --min-text-length, --seed, --max-length (–¥–ª—è —É—á–∏—Ç–µ–ª—è), --normalize, --model-cache, --snli-cache, --micro-batch.

- –§–∞–∑–∞ 1 ‚Äî –ö—ç—à –∏ SNLI
  - CacheManager: –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ models/local_cache/distilbert-base-uncased –∏ cache/snli.
  - –ó–∞–≥—Ä—É–∑–∫–∞/–ø–∞—Ä—Å–∏–Ω–≥ SNLI –≤ JSONL, —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ ¬´–±–∞–∑–æ–≤–æ–≥–æ –ø–æ–¥–Ω–∞–±–æ—Ä–∞¬ª, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ. --snli-limit –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫–∞–∫ –æ–±—Ä–µ–∑–∫–∞ —Å–≤–µ—Ä—Ö—É.

- –§–∞–∑–∞ 2 ‚Äî –£—á–∏—Ç–µ–ª—å (Core ML DistilBERT)
  - üõ†Ô∏è **–î–ï–ô–°–¢–í–ò–ï –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø**: –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å Core ML –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã (—Å–º. –Ω–∏–∂–µ —Å–µ–∫—Ü–∏—é ¬´–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ Core ML –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤¬ª).
  - ModelManager: –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è DistilBERT.mlmodelc –≤ models/local_cache/distilbert-base-uncased/; –µ—Å–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç ‚Äî –æ—à–∏–±–∫–∞ —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–µ–π.
  - MLModelConfiguration.computeUnits = .all (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç GPU/ANE –Ω–∞ M4).
  - WordPiece-—Ç–æ–∫–µ–Ω–∏–∑–∞—Ç–æ—Ä –¥–ª—è –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞ —á–µ—Ä–µ–∑ swift-transformers –∏–ª–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –∏–∑ swift-coreml-transformers.

- –§–∞–∑–∞ 3 ‚Äî –ò–Ω—Ñ–µ—Ä–µ–Ω—Å –∏ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è
  - –ë—ç—Ç—á–∏–Ω–≥ —Ç–µ–∫—Å—Ç–æ–≤ (–º–∏–∫—Ä–æ–±–∞—Ç—á–∏ configurable).
  - –¢–æ–∫–µ–Ω–∏–∑–∞—Ü–∏—è ‚Üí MLModel ‚Üí last_hidden ‚Üí masked mean pooling.
  - –ü–æ —Ñ–ª–∞–≥—É --normalize –≤—ã–ø–æ–ª–Ω–∏—Ç—å L2-–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—é –ø–æ —Ä–∞–∑–º–µ—Ä–Ω–æ—Å—Ç–∏ —ç–º–±–µ–¥–¥–∏–Ω–≥–∞.

- –§–∞–∑–∞ 4 ‚Äî EFB2 Writer
  - –ó–∞–ø–∏—Å–∞—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫: "EFB2", num_samples=0 (–ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä), embedding_dim, dataset_flags.
  - –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Å—ç–º–ø–ª–∞: text_len(u32) + UTF‚Äë8 —Ç–µ–∫—Å—Ç, –∑–∞—Ç–µ–º target(f32√óE). (hasTokens=0 ‚áí –±–ª–æ–∫ L/ids/mask –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç.)
  - –í –∫–æ–Ω—Ü–µ –ø–∞—Ç—á–∏—Ç—å num_samples –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ (seek+–ø–µ—Ä–µ–∑–∞–ø–∏—Å—å u32).
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Ä–∞–∑–º–µ—Ä–Ω–æ—Å—Ç–µ–π.

- –§–∞–∑–∞ 5 ‚Äî –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è
  - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —á—Ç–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ .efb2 —á–µ—Ä–µ–∑ –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π SimpleJSONLDataset.
  - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ EFTextEval –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –≤–µ—Ç–∫–µ .text: –≤—ã–±–∏—Ä–∞–µ—Ç .text-–±–∞—Ç—á–∏, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤–∞—à —Ç–æ–∫–µ–Ω–∏–∑–∞—Ç–æ—Ä –≤ –º–æ–¥–µ–ª–∏ —Å—Ç—É–¥–µ–Ω—Ç–∞, –∏ —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è —Å target.
  - –°—Ä–∞–≤–Ω–∏—Ç—å –≤—ã–±–æ—Ä–æ—á–Ω–æ –∫–æ—Å–∏–Ω—É—Å/–Ω–æ—Ä–º—ã —Å Python-—Ä–µ—Ñ–µ—Ä–µ–Ω—Å–æ–º –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å—Ç—Ä–æ–∫–∞—Ö.

–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–æ–¥ M4
- computeUnits = .all, –∏–∑–±–µ–≥–∞—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π —Å–º–µ–Ω—ã —Ñ–æ—Ä–º (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π max_length –¥–ª—è —É—á–∏—Ç–µ–ª—è –ø–æ –ø–µ—Ä—Ü–µ–Ω—Ç–∏–ª—è–º –¥–ª–∏–Ω—ã).
- –ú–∏–∫—Ä–æ–±–∞—Ç—á–∏ –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –∏ –ø–∞–º—è—Ç–∏.
- –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±—É—Ñ–µ—Ä–æ–≤ –º–∞—Å—Å–∏–≤–æ–≤ –ø–æ–¥ —Ç–æ–∫–µ–Ω—ã/–º–∞—Å–∫–∏ –≤–Ω—É—Ç—Ä–∏ –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞.

–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ Core ML –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ (DistilBERT)
- –í–∞—Ä–∏–∞–Ω—Ç A (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è, –µ—Å–ª–∏ –≥–æ—Ç–æ–≤—ã Python-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã): —ç–∫—Å–ø–æ—Ä—Ç —á–µ—Ä–µ–∑ coremltools –∫–∞–∫ ML Program —Å –≤—ã—Ö–æ–¥–æ–º last_hidden_state; —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å –≤ .mlmodelc. –°–º. –ø–æ–¥—Ä–æ–±–Ω—ã–π –ø–æ—à–∞–≥–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç: docs/—ç–∫—Å–ø–æ—Ä—Ç_DistilBERT_Core_ML_Swift_—Ç–æ–∫–µ–Ω–∏–∑–∞—Ü–∏—è.md (—Ä–∞–∑–¥–µ–ª—ã 2‚Äì6, 8‚Äì9).
- –í–∞—Ä–∏–∞–Ω—Ç B: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∑–∞—Ä–∞–Ω–µ–µ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω–æ–≥–æ –∞—Ä—Ö–∏–≤–∞ DistilBERT.mlmodelc (–∏–ª–∏ .mlpackage) ‚Äî —Ä–∞–∑–º–µ—Å—Ç–∏—Ç—å –≤—Ä—É—á–Ω—É—é.

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ–∂–∏–¥–∞–Ω–∏–π –∏ –¥–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ü—É—Ç—å –¥–ª—è –º–æ–¥–µ–ª–∏ —É—á–∏—Ç–µ–ª—è: models/local_cache/distilbert-base-uncased/
  - –§–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –æ–∂–∏–¥–∞–µ–º —É–≤–∏–¥–µ—Ç—å:
    - DistilBERT.mlmodelc/ (–ø–∞–ø–∫–∞ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –º–æ–¥–µ–ª–∏) –ò–õ–ò DistilBERT.mlpackage (–≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ –º—ã –ª–∏–±–æ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ–º –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ, –ª–∏–±–æ –ø—Ä–æ—Å–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å .mlmodelc)
    - vocab.txt –ò/–ò–õ–ò tokenizer.json (–¥–ª—è WordPiece-—Ç–æ–∫–µ–Ω–∏–∑–∞—Ü–∏–∏ –Ω–∞ Swift)
- üõ†Ô∏è **–î–ï–ô–°–¢–í–ò–Ø –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø** (–≤—ã–±–µ—Ä–∏—Ç–µ –ª—é–±–æ–π –ø—É—Ç—å):
  1) –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å DistilBERT –≤ Core ML —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –ø–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∏ –ø–æ–º–µ—Å—Ç–∏—Ç—å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –≤ models/local_cache/distilbert-base-uncased/.
  2) –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –∑–∞—Ä–∞–Ω–µ–µ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã–π –∞—Ä—Ö–∏–≤ —Å DistilBERT.mlmodelc –∏ —Å–ª–æ–≤–∞—Ä—ë–º —Ç–æ–∫–µ–Ω–∏–∑–∞—Ç–æ—Ä–∞; —è –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É—é –∑–∞–≥—Ä—É–∑–∫—É –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –ø—É—Ç–∏.
  3) –ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ, —á—Ç–æ–±—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —Å–∞–º –∑–∞–≥—Ä—É–∂–∞–ª –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –ø–æ URL ‚Äî –¥–∞–π—Ç–µ —Å—Ç–∞–±–∏–ª—å–Ω—ã–π URL (https/gh release), —è –¥–æ–±–∞–≤–ª—é —à–∞–≥ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –∏ —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∏.

–ü—Ä–∏–Ω—è—Ç—ã–µ –¥–æ–ø—É—â–µ–Ω–∏—è
- –£—á–∏—Ç–µ–ª—å—Å–∫–∏–π —Ç–æ–∫–µ–Ω–∏–∑–∞—Ç–æ—Ä –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤, –Ω–æ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é —Ñ–æ—Ä–º–∞—Ç–∞ –¥–∞–Ω–Ω—ã—Ö. –•—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è.
- –¢–µ–∫—Å—Ç —Ö—Ä–∞–Ω–∏—Ç—Å—è –∫–∞–∫ UTF‚Äë8; –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –Ω–∞—É—á–Ω–æ–π –∫–æ–º–ø—Ä–µ—Å—Å–∏–∏ ‚Äî –æ—Ç–¥–µ–ª—å–Ω–∞—è –≤–µ—Ç–∫–∞ (–≤–Ω–µ MVP).

–ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ MVP
- CLI –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç .efb2 (EFB2) —Å hasText=1, hasTokens=0 –∏–∑ SNLI —Å –∞–≤—Ç–æ-–∫—ç—à–µ–º –º–æ–¥–µ–ª–∏ –∏ SNLI.
- –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π SimpleJSONLDataset —á–∏—Ç–∞–µ—Ç .efb2, –≤—ã—Å—Ç–∞–≤–ª—è–µ—Ç embeddingDim –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, hasTokens=false, –∏ –æ—Ç–¥–∞—ë—Ç .text-–±–∞—Ç—á–∏.
- EFTextEval —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ–≥–æ–Ω—è–µ—Ç –æ–¥–Ω—É –æ—Ü–µ–Ω–∫—É, –º–æ–¥–µ–ª—å —Å—Ç—É–¥–µ–Ω—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω–∏–∑–∞—Ç–æ—Ä.
- –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—É—Å–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫—ç—à (–±–µ–∑ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥–µ–ª–∏/–±–∞–∑—ã SNLI).

–†–∏—Å–∫–∏ –∏ –º–µ—Ä—ã
- –ù–∞–ª–∏—á–∏–µ –ø—Ä–µ–¥–∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π Core ML –º–æ–¥–µ–ª–∏ DistilBERT: –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ—Ç—å —Ä—É—á–Ω–æ–π fallback (–ø–æ–º–µ—Å—Ç–∏—Ç—å .mlmodelc –≤ models/local_cache/‚Ä¶).
- –≠–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ—Å—Ç—å WordPiece —Ç–æ–∫–µ–Ω–∏–∑–∞—Ü–∏–∏ HF (–¥–ª—è —É—á–∏—Ç–µ–ª—è): –±–∞–∑–æ–≤—ã–µ —Ç–µ—Å—Ç—ã; –ø—Ä–∏ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è—Ö —É–ø—Ä–æ—Å—Ç–∏—Ç—å –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—é –∏ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–±–æ—Ä —Å–ø–µ—Ü-—Ç–æ–∫–µ–Ω–æ–≤.
- –û–±—ä—ë–º —Ñ–∞–π–ª–∞ –ø—Ä–∏ —Ö—Ä–∞–Ω–µ–Ω–∏–∏ —Ç–µ–∫—Å—Ç–∞: –¥–ª—è –±–æ–ª—å—à–∏—Ö –∫–æ—Ä–ø—É—Å–æ–≤ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å —à–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–ª–∏ —Å–∂–∞—Ç–∏–µ (–ø–æ–∑–∂–µ).
