# –û—à–∏–±–∫–∏ –∏ –†–µ—à–µ–Ω–∏—è: Cell Prototype

–≠—Ç–æ—Ç —Ñ–∞–π–ª –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–µ—Ç –æ—à–∏–±–∫–∏, –≤—Å—Ç—Ä–µ—á–µ–Ω–Ω—ã–µ –≤–æ –≤—Ä–µ–º—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –º–æ–¥—É–ª—è Cell Prototype, –∏ —Å–ø–æ—Å–æ–±—ã –∏—Ö —Ä–µ—à–µ–Ω–∏—è.

## üìä –°—Ç–∞—Ç—É—Å –û—à–∏–±–æ–∫

**–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å:** ‚úÖ **–ë–ï–ó –ö–†–ò–¢–ò–ß–ï–°–ö–ò–• –û–®–ò–ë–û–ö**

–ë–∞–∑–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥—É–ª—è —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ. –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ.

---

## üóìÔ∏è –ñ—É—Ä–Ω–∞–ª –†–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –î–µ–Ω—å 1 - –ë–∞–∑–æ–≤–∞—è –†–µ–∞–ª–∏–∑–∞—Ü–∏—è (–£—Å–ø–µ—à–Ω–æ)

**–î–∞—Ç–∞:** [–¢–µ–∫—É—â–∞—è –¥–∞—Ç–∞]  
**–§–∞–∑–∞:** –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è CellPrototype  
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ

#### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

- [x] –ö–ª–∞—Å—Å CellPrototype
- [x] –°–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- [x] –ë–∞–∑–æ–≤–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [x] –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ –≤—Ö–æ–¥–æ–≤
- [x] –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤–µ—Å–æ–≤
- [x] –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—ã—Ö–æ–¥–æ–≤

#### –ü—Ä–æ–±–ª–µ–º—ã: –ù–ï–¢

–í –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –±–∞–∑–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ –Ω–µ –±—ã–ª–æ.

---

## üîß –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –û–±–ª–∞—Å—Ç–∏ –¥–ª—è –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

–•–æ—Ç—è –æ—à–∏–±–æ–∫ –ø–æ–∫–∞ –Ω–µ –±—ã–ª–æ, —Å–ª–µ–¥—É–µ—Ç —Å–ª–µ–¥–∏—Ç—å –∑–∞ —ç—Ç–∏–º–∏ –æ–±–ª–∞—Å—Ç—è–º–∏:

### 1. –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –û–±—É—á–µ–Ω–∏—è

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –æ–±—É—á–µ–Ω–∏—è –≤–æ–∑–º–æ–∂–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞–º–∏  
**–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:** –í–∑—Ä—ã–≤–∞—é—â–∏–µ—Å—è/–∏—Å—á–µ–∑–∞—é—â–∏–µ –≥—Ä–∞–¥–∏–µ–Ω—Ç—ã  
**–ü—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∞:** Xavier –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞

### 2. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ü–∞–º—è—Ç–∏

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü—Ä–∏ –±–æ–ª—å—à–∏—Ö –±–∞—Ç—á–∞—Ö –≤–æ–∑–º–æ–∂–Ω–æ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏  
**–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:** OutOfMemoryError  
**–ü—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∞:** –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–æ–≤ –±–∞—Ç—á–µ–π

### 3. –ß–∏—Å–ª–µ–Ω–Ω–∞—è –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å

**–û–ø–∏—Å–∞–Ω–∏–µ:** –í–æ–∑–º–æ–∂–Ω—ã NaN/Inf –ø—Ä–∏ —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã—Ö –≤—Ö–æ–¥–∞—Ö  
**–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:** torch.isnan(), torch.isinf()  
**–ü—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∞:** –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –≤—ã—Ö–æ–¥–æ–≤ —á–µ—Ä–µ–∑ tanh()

---

## üìã –®–∞–±–ª–æ–Ω –¥–ª—è –ë—É–¥—É—â–∏—Ö –û—à–∏–±–æ–∫

–ü—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –æ—à–∏–±–æ–∫ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç —à–∞–±–ª–æ–Ω:

```markdown
### [–î–ê–¢–ê] - [–ö–†–ê–¢–ö–û–ï_–û–ü–ò–°–ê–ù–ò–ï]

**–¢–∏–ø –æ—à–∏–±–∫–∏:** [RUNTIME/CONFIG/LOGIC/PERFORMANCE]  
**–°–µ—Ä—å–µ–∑–Ω–æ—Å—Ç—å:** [–ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø/–í–´–°–û–ö–ê–Ø/–°–†–ï–î–ù–Ø–Ø/–ù–ò–ó–ö–ê–Ø]  
**–°—Ç–∞—Ç—É—Å:** [–†–ï–®–ï–ù–ê/–í_–†–ê–ë–û–¢–ï/–û–¢–õ–û–ñ–ï–ù–ê]

#### –°–∏–º–ø—Ç–æ–º—ã:

- –û–ø–∏—Å–∞–Ω–∏–µ –Ω–∞–±–ª—é–¥–∞–µ–º–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è
- –°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- –£—Å–ª–æ–≤–∏—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è

#### –ü—Ä–∏—á–∏–Ω–∞:

–û–±—ä—è—Å–Ω–µ–Ω–∏–µ –∫–æ—Ä–Ω–µ–≤–æ–π –ø—Ä–∏—á–∏–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã

#### –†–µ—à–µ–Ω–∏–µ:

–®–∞–≥–∏ –ø–æ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—é –æ—à–∏–±–∫–∏

#### –ü—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∞:

–ú–µ—Ä—ã –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è

#### –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:

- `–ø—É—Ç—å/–∫/—Ñ–∞–π–ª—É.py:–Ω–æ–º–µ—Ä_—Å—Ç—Ä–æ–∫–∏`

#### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

–ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –æ—à–∏–±–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞
```

---

## üß™ –ü–æ–ª–µ–∑–Ω—ã–µ –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –û—Ç–ª–∞–¥–∫–∏

### –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ö–ª–µ—Ç–∫–∏

```python
# –ë–∞–∑–æ–≤–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
from core.cell_prototype.main import test_cell_basic
test_cell_basic()

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ NaN/Inf
import torch
output = cell(neighbors, state, external)
print(f"NaN: {torch.isnan(output).any()}")
print(f"Inf: {torch.isinf(output).any()}")
print(f"–î–∏–∞–ø–∞–∑–æ–Ω: [{output.min():.3f}, {output.max():.3f}]")
```

### –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ü–∞–º—è—Ç–∏

```python
import torch
print(f"–ü–∞–º—è—Ç–∏ –≤—ã–¥–µ–ª–µ–Ω–æ: {torch.cuda.memory_allocated() / 1024**2:.1f} MB")
print(f"–ü–∞–º—è—Ç–∏ –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–æ: {torch.cuda.memory_reserved() / 1024**2:.1f} MB")
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ì—Ä–∞–¥–∏–µ–Ω—Ç–æ–≤

```python
# –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –æ–±—É—á–µ–Ω–∏—è
for name, param in cell.named_parameters():
    if param.grad is not None:
        print(f"{name}: grad_norm = {param.grad.norm():.6f}")
```

---

## üìû –ü–ª–∞–Ω –î–µ–π—Å—Ç–≤–∏–π –ø—Ä–∏ –û—à–∏–±–∫–∞—Ö

### –®–∞–≥ 1: –°–±–æ—Ä –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

- [ ] –¢–æ—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
- [ ] –°—Ç–µ–∫ –≤—ã–∑–æ–≤–æ–≤ (traceback)
- [ ] –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –≤—ã–∑–≤–∞–≤—à–∏–µ –æ—à–∏–±–∫—É
- [ ] –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã

### –®–∞–≥ 2: –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è

- [ ] –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –æ—à–∏–±–∫–∏
- [ ] –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ —Å–ª—É—á–∞—è
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### –®–∞–≥ 3: –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

- [ ] –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–Ω–æ—Å—Ç–µ–π —Ç–µ–Ω–∑–æ—Ä–æ–≤
- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –º–æ–¥–µ–ª–∏

### –®–∞–≥ 4: –†–µ—à–µ–Ω–∏–µ

- [ ] –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- [ ] –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —Ä–µ—Ü–∏–¥–∏–≤–æ–≤
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—à–µ–Ω–∏—è

### –®–∞–≥ 5: –í–∞–ª–∏–¥–∞—Ü–∏—è

- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- [ ] –†–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

---

## üéØ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ì–û–¢–û–í**

–ú–æ–¥—É–ª—å Cell Prototype –ø—Ä–æ—à–µ–ª –±–∞–∑–æ–≤–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –≥–æ—Ç–æ–≤ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≤ —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

1. **3D –†–µ—à–µ—Ç–∫–∞ (lattice-3d)** - –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ—Ç–∏ –∫–ª–µ—Ç–æ–∫
2. **–†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –°–∏–≥–Ω–∞–ª–æ–≤ (signal-propagation)** - –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω–æ–π –¥–∏–Ω–∞–º–∏–∫–∏
3. **–ì–ª–∞–≤–Ω–æ–µ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (main.py)** - –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

---

**üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –≠—Ç–æ—Ç —Ñ–∞–π–ª –±—É–¥–µ—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –ø–æ –º–µ—Ä–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –∏ —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–∞–∑–≤–∏—Ç–∏—è –ø—Ä–æ–µ–∫—Ç–∞.
