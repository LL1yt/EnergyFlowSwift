# Meta: Cell Prototype Module

## üìã –û—Å–Ω–æ–≤–Ω–∞—è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- **–ù–∞–∑–≤–∞–Ω–∏–µ**: Cell Prototype
- **–í–µ—Ä—Å–∏—è**: 0.1.0
- **–°—Ç–∞—Ç—É—Å**: –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π (–æ—Å–Ω–æ–≤–∞ –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã)
- **–¢–∏–ø**: Core Module

## üîó –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### –ú–æ–¥—É–ª—å–Ω—ã–µ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- `utils/config-manager`: –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- `utils/logger`: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π
- `utils/math-helpers`: –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É—Ç–∏–ª–∏—Ç—ã

### –í–Ω–µ—à–Ω–∏–µ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (Python –ø–∞–∫–µ—Ç—ã)

- `torch >= 2.0.0`: –û—Å–Ω–æ–≤–∞ –Ω–µ–π—Ä–æ—Å–µ—Ç–∏
- `torch.nn`: –°–ª–æ–∏ –Ω–µ–π—Ä–æ—Å–µ—Ç–∏
- `numpy >= 1.24.0`: –ß–∏—Å–ª–µ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- `yaml >= 6.0`: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### –î–∞–Ω–Ω—ã–µ-–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- `config/cell_prototype.yaml`: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- `config/main_config.yaml`: –û–±—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞

## üì§ –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º—ã–π API

### –û—Å–Ω–æ–≤–Ω—ã–µ –ö–ª–∞—Å—Å—ã

```python
class CellPrototype(nn.Module):
    """–ü—Ä–æ—Ç–æ—Ç–∏–ø –∫–ª–µ—Ç–∫–∏ - –æ—Å–Ω–æ–≤–∞ –≤—Å–µ–π 3D —Ä–µ—à–µ—Ç–∫–∏"""

    def __init__(self, config: dict)
    def forward(self, neighbor_states, own_state, external_input=None) -> torch.Tensor
    def get_info(self) -> dict
    def get_parameter_count(self) -> int
    def reset_state(self) -> None
```

### –£—Ç–∏–ª–∏—Ç–∞—Ä–Ω—ã–µ –§—É–Ω–∫—Ü–∏–∏

```python
def create_cell_from_config(config_path: str) -> CellPrototype
def test_cell_basic(cell: CellPrototype) -> bool
def visualize_cell_weights(cell: CellPrototype, save_path: str) -> None
```

## üìä –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –í—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω–∞—è –°–ª–æ–∂–Ω–æ—Å—Ç—å

- **Forward Pass**: O(input_size √ó hidden_size + hidden_size √ó state_size)
- **Memory**: O(total_parameters) ~ –Ω–µ—Å–∫–æ–ª—å–∫–æ KB –¥–ª—è –±–∞–∑–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏
- **–ü–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º**: –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑—É–µ–º–æ (–≤—Å–µ –∫–ª–µ—Ç–∫–∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã)

### –û–∂–∏–¥–∞–µ–º—ã–µ –†–∞–∑–º–µ—Ä—ã

```yaml
–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:
  input_size: 56 # 6 —Å–æ—Å–µ–¥–µ–π √ó 8 + own_state 8
  hidden_size: 16 # –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π
  state_size: 8 # –í—ã—Ö–æ–¥–Ω–æ–π —Ä–∞–∑–º–µ—Ä

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –º–æ–¥–µ–ª–∏: ~1000 –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
–ü–∞–º—è—Ç—å GPU: ~4KB –Ω–∞ –∫–ª–µ—Ç–∫—É
–í—Ä–µ–º—è forward pass: ~0.1ms –Ω–∞ –∫–ª–µ—Ç–∫—É (GPU)
```

## üéØ –¢–æ—á–∫–∏ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### –í—Ö–æ–¥–Ω—ã–µ –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã

- **neighbor_states**: `torch.Tensor[batch, 6, state_size]` - —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–æ—Å–µ–¥–µ–π
- **own_state**: `torch.Tensor[batch, state_size]` - —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- **external_input**: `torch.Tensor[batch, ext_size]` - –≤–Ω–µ—à–Ω–∏–π –≤—Ö–æ–¥ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –í—ã—Ö–æ–¥–Ω—ã–µ –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã

- **new_state**: `torch.Tensor[batch, state_size]` - –Ω–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–ª–µ—Ç–∫–∏

### –°–æ–±—ã—Ç–∏—è/Callbacks

- `on_forward_start`: –ù–∞—á–∞–ª–æ –æ–±—Ä–∞–±–æ—Ç–∫–∏
- `on_forward_end`: –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏
- `on_state_update`: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã

```yaml
cell_prototype:
  state_size: int # –†–∞–∑–º–µ—Ä —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–ª–µ—Ç–∫–∏
  neighbor_input_size: int # –†–∞–∑–º–µ—Ä –≤—Ö–æ–¥–∞ –æ—Ç —Å–æ—Å–µ–¥–∞
  num_neighbors: int # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ—Å–µ–¥–µ–π (–æ–±—ã—á–Ω–æ 6)
```

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã

```yaml
cell_prototype:
  hidden_layers: [int] # –†–∞–∑–º–µ—Ä—ã —Å–∫—Ä—ã—Ç—ã—Ö —Å–ª–æ–µ–≤ [16, 32]
  activation: str # "tanh", "sigmoid", "relu"
  use_bias: bool # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å bias –≤ —Å–ª–æ—è—Ö
  dropout: float # Dropout rate (0.0-1.0)
  initialization: str # "xavier", "kaiming", "normal"
```

## üö¶ –°–æ—Å—Ç–æ—è–Ω–∏—è –ú–æ–¥—É–ª—è

### –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π –¶–∏–∫–ª

1. **INIT**: –°–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
2. **READY**: –ì–æ—Ç–æ–≤ –∫ –æ–±—Ä–∞–±–æ—Ç–∫–µ –¥–∞–Ω–Ω—ã—Ö
3. **PROCESSING**: –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ forward pass
4. **ERROR**: –û—à–∏–±–∫–∞ –≤ –æ–±—Ä–∞–±–æ—Ç–∫–µ
5. **SHUTDOWN**: –û—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤

### –£—Å–ª–æ–≤–∏—è –ü–µ—Ä–µ—Ö–æ–¥–æ–≤

- `INIT ‚Üí READY`: –£—Å–ø–µ—à–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤–µ—Å–æ–≤
- `READY ‚Üí PROCESSING`: –í—ã–∑–æ–≤ forward()
- `PROCESSING ‚Üí READY`: –£—Å–ø–µ—à–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ
- `* ‚Üí ERROR`: –õ—é–±–∞—è –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–∞—è —Å–∏—Ç—É–∞—Ü–∏—è

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –∏ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ö–ª—é—á–µ–≤—ã–µ –ú–µ—Ç—Ä–∏–∫–∏

- `forward_time`: –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è forward pass
- `state_magnitude`: –ù–æ—Ä–º–∞ –≤—ã—Ö–æ–¥–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- `gradient_norm`: –ù–æ—Ä–º–∞ –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–≤ (–ø—Ä–∏ –æ–±—É—á–µ–Ω–∏–∏)
- `parameter_count`: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

### –ü–æ—Ä–æ–≥–æ–≤—ã–µ –ó–Ω–∞—á–µ–Ω–∏—è

```yaml
–ù–æ—Ä–º–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:
  forward_time: < 1ms
  state_magnitude: < 2.0 (–ø—Ä–∏ tanh –∞–∫—Ç–∏–≤–∞—Ü–∏–∏)
  gradient_norm: < 10.0

–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è:
  state_magnitude: > 5.0  # –í–æ–∑–º–æ–∂–Ω–∞ –Ω–µ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å
  gradient_norm: > 100.0  # –í–∑—Ä—ã–≤–∞—é—â–∏–µ—Å—è –≥—Ä–∞–¥–∏–µ–Ω—Ç—ã
```

## üîí –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è

### –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- **–†–∞–∑–º–µ—Ä –≤—Ö–æ–¥–∞**: –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞
- **Batch —Ä–∞–∑–º–µ—Ä**: –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º –¥–ª—è –≤—Å–µ—Ö –≤—Ö–æ–¥–æ–≤
- **GPU –ø–∞–º—è—Ç—å**: –†–∞—Å—Ç–µ—Ç –ª–∏–Ω–µ–π–Ω–æ —Å batch —Ä–∞–∑–º–µ—Ä–æ–º

### –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è

‚ö†Ô∏è **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å**: –ü—Ä–∏ –±–æ–ª—å—à–∏—Ö learning rates –≤–æ–∑–º–æ–∂–Ω–∞ –Ω–µ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å
‚ö†Ô∏è **–ì—Ä–∞–¥–∏–µ–Ω—Ç—ã**: –¢—Ä–µ–±—É–µ—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–≤ –ø—Ä–∏ –¥–ª–∏–Ω–Ω—ã—Ö –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—è—Ö  
‚ö†Ô∏è **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è**: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –∑–∞—Ç—É—Ö–∞–Ω–∏—é –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–≤

## üß™ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### Unit –¢–µ—Å—Ç—ã

- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞
- ‚úÖ Forward pass —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏ —Ä–∞–∑–º–µ—Ä–∞–º–∏
- ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –≤—ã—Ö–æ–¥–æ–≤
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### Integration –¢–µ—Å—Ç—ã

- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å lattice-3d
- ‚úÖ –†–∞–±–æ—Ç–∞ –≤ —Å–æ—Å—Ç–∞–≤–µ signal-propagation
- ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å training-loop

### Performance –¢–µ—Å—Ç—ã

- ‚úÖ –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è forward pass
- ‚úÖ –ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏
- ‚úÖ –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ —Å batch —Ä–∞–∑–º–µ—Ä–æ–º

## üìù –ò—Å—Ç–æ—Ä–∏—è –ò–∑–º–µ–Ω–µ–Ω–∏–π

### v0.1.0 (–¢–µ–∫—É—â–∞—è)

- [x] –ë–∞–∑–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- [x] –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ YAML
- [x] –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ—Å—Ç—ã
- [ ] –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)
- [ ] –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)

---

**–°–ª–µ–¥—É—é—â–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –≤–µ—Å–æ–≤ –∏ —É–ª—É—á—à–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä.
